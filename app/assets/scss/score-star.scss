.rating {
  display: flex;
  flex-direction: row-reverse;

  input {
    display: none;
  }

  label {
    cursor: pointer;
    width: 30px;
    height: 30px;
    margin: 0 2px;
    position: relative;

    svg {
      width: 100%;
      height: 100%;
      fill: #ddd;
    }
  }

  input:checked ~ label svg,
  label:hover ~ label svg,
  label:hover svg {
    fill: #ffd700;
  }

  /* 半星样式 */
  label.half {
    width: 15px;
    overflow: hidden;
    position: relative;
    margin-right: -2px;
    z-index: 1;

    svg {
      width: 30px;
      position: absolute;
      right: 0;
    }
  }

  /* 禁用状态 */
  input:disabled ~ label {
    pointer-events: none;
  }
}

.rating-container {
  .stars {
    display: flex;
    flex-direction: row;

    .star {
      width: 20px;
      height: 20px;
      margin: 0 3px;
      position: relative;
      cursor: pointer;

      svg {
        width: 100%;
        height: 100%;
        fill: #ddd;
      }

      &.half {
        position: relative;

        &::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 50%;
          bottom: 0;
          width: 100%;
          height: 100%;
          background-color: #ffd700;
          -webkit-mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path></svg>')
            center / contain no-repeat;
          mask: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"></path></svg>')
            center / contain no-repeat;
          clip-path: polygon(0 0, 50% 0, 50% 100%, 0 100%);
          z-index: 1;
        }

        svg {
          fill: #ddd;
        }
      }

      &.full svg {
        fill: #ffd700;
      }

      &.loading {
        animation: starPulse 1.2s infinite ease-in-out;
      }
    }
  }

  .selected-score {
    text-align: center;
    margin-top: 10px;
    font-size: 14px;
  }
}

.loading-indicator {
  display: none;
}

@keyframes starPulse {
  0% {
    transform: scale(1);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.1);
    opacity: 1;
  }
  100% {
    transform: scale(1);
    opacity: 0.5;
  }
}
